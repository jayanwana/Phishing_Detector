(()=>{chrome.runtime.onMessage.addListener((function(r,o,t){if("scrapeMail"===r.command){try{var i=e();n(i,t)}catch(e){return t({error:"An error occurred"}),!1}return!0}}));var e=function(){var e=document.querySelector(".a3s").innerText;if(e&&"string"==typeof e)return JSON.stringify({text:e});throw console.log("Email not found"),new Error("Email not found")},n=function(e,n){fetch("https://phishing-detector-backend-7sgvu.ondigitalocean.app/classify",{method:"POST",headers:{"Content-Type":"application/json"},body:e}).then((function(e){return e.json()})).then((function(e){n(e)})).catch((function(e){console.error(e),n({error:"A connection error occured"})}))};window.addEventListener("hashchange",(function(){if(location.href.search(/all\/|inbox\/|imp\/|starred\/|snoozed\/|social\/|updates\/|forums\/|promotions\/|Trash\/|spam\//)>0){var r=e();n(r,(function(e){(null==e?void 0:e.error)?alert(e.error):(null==e?void 0:e.result)&&("0"===e.result?alert("This email has been classified as a non-phishing email"):alert("This email has been classified as a phishing email"))}))}}))})();